services:
    _defaults:
        autowire: true
        public: false
        bind:
            $commandBus: '@Botilka\Infrastructure\Symfony\Messenger\SymfonyCommandBus'
            $queryBus: '@Botilka\Infrastructure\Symfony\Messenger\SymfonyQueryBus'

    #Â API Platform bridge for commands & queries
    Botilka\Bridge\ApiPlatform\Description\DescriptionContainer: ~
    Botilka\Bridge\ApiPlatform\DataProvider\CommandDataProvider: ~
    Botilka\Bridge\ApiPlatform\DataProvider\QueryDataProvider: ~

    Botilka\Bridge\ApiPlatform\Action\CommandAction:
        public: true

    Botilka\Infrastructure\Symfony\Messenger\SymfonyCommandBus:
        arguments:
            $bus: '@messenger.bus.commands'

    Botilka\Infrastructure\Symfony\Messenger\SymfonyQueryBus:
        arguments:
            $bus: '@messenger.bus.queries'
