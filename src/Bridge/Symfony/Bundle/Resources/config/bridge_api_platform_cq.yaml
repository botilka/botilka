services:
    _defaults:
        autowire: true
        public: false
        bind:
            $commandBus: '@Botilka\Bus\Bus.commands'
            $queryBus: '@Botilka\Bus\Bus.queries'

    #Â API Platform bridge for commands & queries
    Botilka\Bridge\ApiPlatform\Description\DescriptionContainer: ~
    Botilka\Bridge\ApiPlatform\DataProvider\CommandDataProvider: ~
    Botilka\Bridge\ApiPlatform\DataProvider\QueryDataProvider: ~

    Botilka\Bridge\ApiPlatform\Action\CommandAction:
        public: true

    Botilka\Bus\Bus.commands:
        class: Botilka\Infrastructure\Symfony\Messenger\SymfonyMessageBus
        arguments:
            $bus: '@messenger.bus.commands'

    Botilka\Bus\Bus.queries:
        class: Botilka\Infrastructure\Symfony\Messenger\SymfonyMessageBus
        arguments:
            $bus: '@messenger.bus.queries'
